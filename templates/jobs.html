{% extends "base.html" %}

{% block title %}Job Listings - DevJobs{% endblock %}

{% block content %}
<h1>Available Jobs</h1>
<h2>Search Jobs</h2>
<form method="get" action="/view-jobs" class="mb-4">
  <div class="row">
    <div class="col-md-4 mb-2">
      <input type="text" name="title" class="form-control" placeholder="Title" value="{{ request.args.get('title', '') }}">
    </div>
    <div class="col-md-4 mb-2">
      <input type="text" name="location" class="form-control" placeholder="Location" value="{{ request.args.get('location', '') }}">
    </div>
    <div class="col-md-4 mb-2">
      <button type="submit" class="btn btn-primary w-100">Search</button>
    </div>
  </div>
</form>

{% for job in jobs %}
<div class="card mb-3">
  <div class="card-body">
    <h5 class="card-title">{{ job.title }}</h5>
    <h6 class="card-subtitle mb-2 text-muted">{{ job.location }}</h6>
    <p class="card-text">{{ job.description }}</p>
    <p class="card-text"><small class="text-muted">Posted: {{ job.created_at or "N/A" }}</small></p>

    <a href="/edit-job/{{ job.id }}" class="btn btn-primary">Edit</a>
    <form action="/delete-job/{{ job.id }}" method="POST" style="display:inline;">
      <button type="submit" class="btn btn-danger">Delete</button>
    </form>
  </div>
</div>
{% else %}
<p>No jobs posted yet.</p>
{% endfor %}
{% endblock %}
